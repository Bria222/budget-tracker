(this["webpackJsonpbudget-tracker"]=this["webpackJsonpbudget-tracker"]||[]).push([[2],{140:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e,t,n){Object(r.useEffect)((function(){return n.onTitleChange(e),n.onActions(t),function(){n.onTitleChange(""),n.onActions(void 0)}}),[])}},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";e.length>2?e.goBack():e.replace(t)}},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(36),a=n(0),o=n(41),c=n(195),i=n(94);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t={component:e.to?o.b:void 0};return e.onClick&&e.to&&console.warn("Button should not have both onClick and href properties"),t}var f=function(e){return a.createElement(i.a,Object.assign({color:"inherit"},e,l(e)),e.icon&&a.createElement(e.icon,null))};var d=function(e){return a.createElement(c.a,Object.assign({style:s({position:"fixed",bottom:"1rem",zIndex:10},(t=e.color,"primary"===t||void 0===t?{right:"1rem"}:{left:"1rem"})),color:e.color||"secondary"},e,l(e)),e.children);var t}},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),a=n(18),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;Object(r.a)(this,e),this._date=void 0,this._date=new Date(t.getFullYear(),t.getMonth(),t.getDate())}return Object(a.a)(e,[{key:"clone",value:function(){return new e(this._date)}},{key:"addDays",value:function(e){return this._date.setDate(this._date.getDate()+e),this}},{key:"addMonths",value:function(e){return this._date.setMonth(this._date.getMonth()+e),this}},{key:"addYears",value:function(e){return this._date.setFullYear(this._date.getFullYear()+e),this}},{key:"equals",value:function(e){return this._date.getTime()===e._date.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"day",get:function(){return this._date.getDate()}},{key:"timeMs",get:function(){return this._date.getTime()}},{key:"isToday",get:function(){return e.isToday(this)}},{key:"shortString",get:function(){return new Intl.DateTimeFormat(void 0,{day:"numeric",month:"long",year:"numeric"}).format(this._date)}}],[{key:"fromTimeMs",value:function(t){return new e(new Date(t))}},{key:"fromYMD",value:function(t){return new e(new Date(t.year,t.month,t.day))}},{key:"isToday",value:function(e){var t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()}}]),e}()},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(i.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(u.b)();return Object(i.useEffect)((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,s.getBudgetsStore();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=!0;return t&&function(){e.apply(this,arguments)}(),function(){t=!1}}),[n,s]),Object(i.useEffect)((function(){var e=!0,t={onStorageDataChanged:function(){r(void 0)}};return e&&s.storage.addObserver(t),function(){e=!1,s.storage.deleteObserver(t)}}),[s]),n}},148:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return r}))},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n(318),o=function(e){return r.createElement(a.a,Object.assign({id:"input-field-".concat(e.label),style:{margin:8},margin:"dense"},e))}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=864e5;function a(e,t){return Math.floor((t-e)/r)+1}function o(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).toISOString().slice(0,10)}function c(e){return new Intl.DateTimeFormat(void 0,{month:"long"}).format(new Date(2e3,e,1))}function i(e,t){return new Intl.DateTimeFormat(void 0,{month:"long",year:"numeric"}).format(new Date(e,t,1))}},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(146);function s(e){var t=Object(u.a)(),n=Object(i.useState)(),r=Object(c.a)(n,2),s=r[0],l=r[1];return Object(i.useEffect)((function(){function n(){return(n=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,n.getBudgetModel(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(e){var r=!0;return r&&(t?function(e){n.apply(this,arguments)}(t):l(void 0)),function(){r=!1}}}),[e,t]),s}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(u.b)(),t=Object(i.useState)(),n=Object(c.a)(t,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){function t(){return(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,e.getCategoriesStore();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e,r]),r}},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(188),o=n.n(a),c=n(142),i=function(e){return r.createElement(c.a,Object.assign({icon:o.a,"aria-label":"Delete"},e))}},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(174),o=n.n(a),c=n(142),i=function(e){return r.createElement(c.b,Object.assign({"aria-label":"Save"},e),r.createElement(o.a,null))}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n.n(r),o=n(198),c=n(325),i=n(257),u=n(255),s=n(256),l=n(254),f=n(51),d=function(e){var t=function(){return e.onClose(!1)},n=Object(f.a)();return a.a.createElement(c.a,{open:e.open,onClose:t,"aria-labelledby":"y-n-dialog-title","aria-describedby":"y-n-dialog-description"},a.a.createElement(l.a,{id:"y-n-dialog-title"},e.question),e.description&&a.a.createElement(u.a,null,a.a.createElement(s.a,{id:"y-n-dialog-description"},e.description)),a.a.createElement(i.a,null,a.a.createElement(o.a,{onClick:t,color:"primary"},n("Disagree")),a.a.createElement(o.a,{onClick:function(){return e.onClose(!0)},color:"primary",autoFocus:!0},n("Agree"))))}},165:function(e,t,n){"use strict";function r(e,t){return e/t}n.d(t,"a",(function(){return r}))},167:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n.n(a),c=n(4),i=n(16),u=n(40);t.a=function(e){var t=e.name,n=function(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],s=n[1],l=Object(u.b)();return Object(r.useEffect)((function(){function t(){return(t=Object(c.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getIconsStore();case 2:n=t.sent,s(n.getIcon(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e,l]),a}(t);return r.createElement(r.Suspense,{fallback:t},n?r.createElement(n.Icon,{style:{color:n.color}}):null)}},171:function(e,t,n){"use strict";var r=n(1),a=n(3),o=n(0),c=n.n(o),i=(n(6),n(5)),u=n(95),s=n(7),l=c.a.forwardRef((function(e,t){var n=e.classes,o=e.className,s=e.raised,l=void 0!==s&&s,f=Object(a.a)(e,["classes","className","raised"]);return c.a.createElement(u.a,Object(r.a)({className:Object(i.a)(n.root,o),elevation:l?8:1,ref:t},f))}));t.a=Object(s.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(l)},172:function(e,t,n){"use strict";var r=n(1),a=n(3),o=n(0),c=n.n(o),i=(n(6),n(5)),u=n(7),s=c.a.forwardRef((function(e,t){var n=e.classes,o=e.className,u=e.component,s=void 0===u?"div":u,l=Object(a.a)(e,["classes","className","component"]);return c.a.createElement(s,Object(r.a)({className:Object(i.a)(n.root,o),ref:t},l))}));t.a=Object(u.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(s)},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={};function a(e,t){return function(e){return e in r||(r[e]=new Intl.NumberFormat(void 0,{style:"currency",currency:e})),r[e]}(t).format(e)}},179:function(e,t,n){"use strict";var r=n(1),a=n(3),o=n(0),c=n.n(o),i=(n(6),n(5)),u=n(9),s=n(7),l=n(54),f=n(11),d=n(133),y=c.a.forwardRef((function(e,t){var n=e.classes,o=e.className,s=e.color,y=void 0===s?"primary":s,b=e.component,p=void 0===b?"a":b,m=e.onBlur,h=e.onFocus,v=e.TypographyClasses,g=e.underline,O=void 0===g?"hover":g,j=e.variant,C=void 0===j?"inherit":j,w=Object(a.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),E=Object(l.a)(),k=E.isFocusVisible,S=E.onBlurVisible,D=E.ref,I=c.a.useState(!1),x=I[0],P=I[1],B=Object(f.c)(t,D);return c.a.createElement(d.a,Object(r.a)({className:Object(i.a)(n.root,n["underline".concat(Object(u.a)(O))],o,x&&n.focusVisible,{button:n.button}[p]),classes:v,color:y,component:p,onBlur:function(e){x&&(S(),P(!1)),m&&m(e)},onFocus:function(e){k(e)&&P(!0),h&&h(e)},ref:B,variant:C},w))}));t.a=Object(s.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(y)},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(36),a=n(14),o=n(18),c=n(143);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(){function e(t){Object(a.a)(this,e),this._date=void 0,this.amount=void 0,this.amountBaseCurrency=void 0,this.currency=void 0,this.categoryId=void 0,this.countryCode=void 0,this.description=void 0,this.identifier=void 0,this.when=void 0,this.budgetId=void 0,this.splitInDays=void 0,this.identifier=t.identifier,this.amountBaseCurrency=t.amountBaseCurrency,this.amount=t.amount,this.currency=t.currency,this.categoryId=t.categoryId,this.countryCode=t.countryCode,this.description=t.description,this.when=t.when,this.budgetId=t.budgetId,this.splitInDays=t.splitInDays>0?t.splitInDays:1,this.validate()}return Object(o.a)(e,[{key:"inBudgetDates",value:function(e){return this.when<=e.to&&this.when>=e.from}},{key:"inDates",value:function(e,t){return this.when<=t&&this.when>=e}},{key:"addToTotals",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=this.split()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;e.add(c.amountBaseCurrency,c.dateParts)}}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"subtractTotal",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=this.split()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;e.subtract(c.amountBaseCurrency,c.dateParts)}}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"validate",value:function(){var e=[];if(void 0===this.budgetId&&e.push("budget identifier"),void 0===this.amountBaseCurrency&&e.push("amount in base currency"),2!==this.countryCode.length&&e.push("country code"),3!==this.currency.length&&e.push("currency code"),e.length>0)throw Error("Invalid expense (".concat(this.identifier,") fields: ").concat(e.join(", ")))}},{key:"split",value:function(){if(this.splitInDays<1)throw Error("You cannot split an expense in less than one piece");if(1===this.splitInDays)return[this];for(var t=this.amountBaseCurrency/this.splitInDays,n=this.amount/this.splitInDays,r=[new e(u({},this,{amount:n,amountBaseCurrency:t}))],a=1;a<this.splitInDays;a++)r.push(new e(u({},this,{amount:n,amountBaseCurrency:t,when:c.a.fromTimeMs(this.when).addDays(a).timeMs})));return r}},{key:"info",get:function(){var e=this.amount,t=this.amountBaseCurrency,n=this.categoryId,r=this.countryCode,a=this.currency;return{amount:e,amountBaseCurrency:t,categoryId:n,description:this.description,identifier:this.identifier,when:this.when,countryCode:r,currency:a,budgetId:this.budgetId,splitInDays:this.splitInDays}}},{key:"json",get:function(){return JSON.stringify(this.info)}},{key:"date",get:function(){return this._date||(this._date=c.a.fromTimeMs(this.when)),this._date}},{key:"day",get:function(){return this.date.day}},{key:"month",get:function(){return this.date.month}},{key:"year",get:function(){return this.date.year}},{key:"dateParts",get:function(){return[this.year,this.month,this.day]}}],[{key:"sum",value:function(e){return Object.values(e).map((function(e){return e.amountBaseCurrency})).reduce((function(e,t){return e+t}))}}]),e}()},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(u.b)(),t=Object(i.useState)(),n=Object(c.a)(t,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){function t(){return(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,e.getCurrenciesStore();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e]),r}},184:function(e,t,n){"use strict";var r=n(36),a=n(16),o=n(0),c=n(197),i=n(149),u=n(198),s=n(167),l=function(e){var t=e.name;return o.createElement(u.a,{onClick:function(){return e.onClick(t)},variant:"outlined"},o.createElement(s.a,{name:t}))},f=l,d=n(325),y=n(254),b=n(255),p=n(2),m=n.n(p),h=n(4),v=n(40);var g=function(e){function t(t){e.onClose(t)}var n=function(){var e=Object(o.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(v.b)();return Object(o.useEffect)((function(){function e(){return(e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getIconsStore();case 2:t=e.sent,r(t.iconNames);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=!0;return t&&function(){e.apply(this,arguments)}(),function(){t=!1}}),[c]),n}();return o.createElement(d.a,{onClose:function(){e.onClose(e.selectedValue)},"aria-labelledby":"dialog-title",open:e.open},o.createElement(y.a,{id:"dialog-title"},"Select icon for category"),o.createElement(b.a,null,o.createElement(c.a,{container:!0,direction:"row",justify:"center"},n&&n.map((function(e){return o.createElement(l,{onClick:t,name:e,key:"icon-".concat(e)})})))))},O=n(156),j=n(162),C=n(51);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=o.useState(!1),n=Object(a.a)(t,2),r=n[0],u=n[1],s=o.useState(!1),l=Object(a.a)(s,2),d=l[0],y=l[1],b=o.useState(e.category),p=Object(a.a)(b,2),m=p[0],h=p[1],v=Object(C.a)();return o.createElement(o.Fragment,null,o.createElement(c.a,{container:!0,direction:e.direction||"row",wrap:"nowrap"},o.createElement(c.a,{item:!0},o.createElement(i.a,{label:"row"===e.direction?"":v("Name"),value:m.name,onChange:function(t){t.preventDefault();var n=t.target.value,r=E({},m,{name:n});h(r),e.onChange(r)}})),o.createElement(c.a,{item:!0},o.createElement(f,{name:m.icon,onClick:function(){u(!0)}})),e.onDelete&&o.createElement(c.a,{item:!0},o.createElement(O.a,{onClick:function(){y(!0)}}))),o.createElement(g,{onClose:function(t){if(m.icon!==t){var n=E({},m,{icon:t});h(n),e.onChange(n)}u(!1)},open:r,selectedValue:m.icon}),o.createElement(j.a,{open:d,onClose:function(t){y(!1),e.onDelete&&t&&e.onDelete(e.category.identifier)},question:'Do your really want to delete "'.concat(e.category.name,'" category?'),description:"The expenses assigned to this category will be assigned to default."}))}},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n(149),o=function(e){return r.createElement(a.a,{autoFocus:!0,required:!0,type:"number",label:e.label,value:e.amountInput||"",inputProps:{step:".01","aria-required":!0},onChange:function(t){var n=parseFloat(t.target.value);e.onAmountChange(n)},helperText:e.helperText,disabled:e.disabled})}},202:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(148),a=n(0),o=n.n(a),c=n(149),i=n(183),u=n(51),s=function(e){var t=e.onCurrencyChange,n=Object(i.a)(),a=Object(u.a)(),s=o.a.useMemo((function(){function e(e,t){return o.a.createElement("option",{key:"currency-option-".concat(e),value:e},t)}var t=[];if(n){var a=n.currencies,c=n.lastCurrenciesUsed,i=new Set([].concat(Object(r.a)(c),Object(r.a)(a.keys()))),u=!0,s=!1,l=void 0;try{for(var f,d=i[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var y=f.value,b=a.get(y);b&&t.push(e(y,b))}}catch(p){s=!0,l=p}finally{try{u||null==d.return||d.return()}finally{if(s)throw l}}}else t.push(e("loading","Loading"));return t}),[n]);return o.a.createElement(c.a,{label:a("Currency"),select:!0,SelectProps:{native:!0},onChange:function(e){var n=e.target.value;t&&n&&t(n)},value:e.selectedCurrency,required:!0,disabled:e.disabled},s)}},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(16),a=n(0),o=n(184),c=n(158),i=n(58),u=function(e){var t=a.useState(e.category||{name:"",icon:"Label",identifier:Object(i.a)()}),n=Object(r.a)(t,2),u=n[0],s=n[1];return a.createElement("form",{onSubmit:function(t){t.stopPropagation(),t.preventDefault(),e.onSubmit(u)}},a.createElement(o.a,{category:u,onChange:s}),a.createElement(c.a,{type:"submit",color:"primary",disabled:""===u.name}))}},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(u.b)(),t=Object(i.useState)(),n=Object(c.a)(t,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){function t(){return(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,e.getCountriesStore();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e,r]),r}},221:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(197),s=n(150),l=n(149),f=n(218),d=n(51),y=function(e){var t=Object(d.a)(),n=i.useState([{name:t("Countries"),code:e.selectedCountry}]),r=Object(c.a)(n,2),a=r[0],o=r[1],u=Object(f.a)();return i.useEffect((function(){u&&o(u.countries)}),[u]),i.createElement(l.a,{label:t("Country"),onChange:function(t){e.onCountryChange(t.target.value)},value:e.selectedCountry,select:!0,required:!0,SelectProps:{native:!0}},a.map((function(e){return i.createElement("option",{key:"country-option-".concat(e.code),value:e.code},e.name)})))},b=n(171),p=n(172),m=n(202),h=n(201),v=n(165),g=n(173),O=n(183);var j=function(e){var t=Object(d.a)(),n=i.useState(),r=Object(c.a)(n,2),s=r[0],l=r[1],f=e.baseCurrency,y=e.selectedCurrency,j=e.onChange,C=e.onError,w=function(e,t){var n=Object(i.useState)(),r=Object(c.a)(n,2),u=r[0],s=r[1],l=Object(O.a)();return Object(i.useEffect)((function(){function n(){return(n=Object(o.a)(a.a.mark((function n(r){var o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getRate(e,t);case 2:o=n.sent,s(o);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var r=!0;return r&&l&&(function(n){var r=n.getLocalRates(e);r&&t in r&&s(r.rates[t])}(l),function(e){n.apply(this,arguments)}(l)),function(){r=!1}}),[e,t,l]),u}(f,y);function E(e,n){if(f&&n&&e)if(f===n)j(e,n,e);else try{j(e,n,function(e){if(w)return Object(v.a)(e,w);throw new Error(t("Error fetching currencies"))}(e)),l(void 0)}catch(s){l(s)}else j(e,n,e)}i.useEffect((function(){return C&&C(s)}),[s,C]);return i.createElement(u.a,{container:!0,direction:"row",alignItems:"baseline"},i.createElement(u.a,{item:!0},i.createElement(h.a,{amountInput:e.amountInput,label:e.label,onAmountChange:function(t){e.selectedCurrency&&E(t,e.selectedCurrency)},helperText:function(){if(f!==e.selectedCurrency&&e.amountInBaseCurrency)return Object(g.a)(e.amountInBaseCurrency,f)}(),disabled:e.disabled})),i.createElement(u.a,{item:!0},i.createElement(m.a,{selectedCurrency:e.selectedCurrency,onCurrencyChange:function(t){void 0!==e.amountInput&&E(e.amountInput,t)},disabled:e.disabled})),void 0!==s&&i.createElement(b.a,null,i.createElement(p.a,null,t("Error converting to base"),".",t("Connect to get last rates"),".",t("Still add amount in base"),".")))},C=n(36),w=n(179),E=n(325),k=n(254),S=n(255),D=n(206),I=function(e){var t=Object(d.a)();return i.createElement(E.a,{"aria-labelledby":"category-dialog-title",open:e.open,onClose:function(){return e.onClose()}},i.createElement(k.a,{id:"category-dialog-title"},t("Add category")),i.createElement(S.a,{style:{marginBottom:"1rem"}},i.createElement(D.a,{onSubmit:e.onClose})))},x=n(40),P=n(152);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){return i.createElement(i.Fragment,null,Object.entries(e.categories).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return i.createElement("option",{key:"category-option-".concat(n),value:r.identifier},r.name)})))},F=function(e){var t=e.selectedCategory,n=e.onCategoryChange,r=Object(x.b)(),u=Object(d.a)(),s=i.useState(Object(C.a)({},t,{identifier:t,name:"...",icon:""})),f=Object(c.a)(s,2),y=f[0],b=f[1],p=i.useState(!1),m=Object(c.a)(p,2),h=m[0],v=m[1],g=Object(P.a)();i.useEffect((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=6;break}return e.next=3,g.getCategories();case 3:r=e.sent,t in r||n(Object.keys(r)[0]),b(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g]);var O=function(){var e=Object(o.a)(a.a.mark((function e(t){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!1),!t){e.next=9;break}return e.next=4,r.getCategoriesStore();case 4:return o=e.sent,e.next=7,o.setCategories([t]);case 7:b(T({},y,{category:t})),n(t.identifier);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.createElement(i.Fragment,null,i.createElement(l.a,{label:u("Category"),onChange:function(e){n(e.target.value)},value:t,helperText:i.createElement(w.a,{onClick:function(e){e.preventDefault(),v(!0)}},u("Add category")),select:!0,required:!0,SelectProps:{native:!0}},i.createElement(_,{categories:y})),i.createElement(I,{open:h,onClose:O}))},M=n(158),A=n(182);n.d(t,"a",(function(){return N}));var N=function(e){var t=i.useState(),n=Object(c.a)(t,2),r=n[0],f=n[1],b=i.useState(e.currency),p=Object(c.a)(b,2),m=p[0],h=p[1],v=i.useState(e.amount),O=Object(c.a)(v,2),C=O[0],w=O[1],E=i.useState(e.countryCode),k=Object(c.a)(E,2),S=k[0],D=k[1],I=i.useState(Object(s.b)(new Date(e.when))),P=Object(c.a)(I,2),B=P[0],T=P[1],_=i.useState(e.categoryId),N=Object(c.a)(_,2),q=N[0],Y=N[1],V=i.useState(e.amountBaseCurrency),L=Object(c.a)(V,2),R=L[0],z=L[1],J=i.useState(e.description),H=Object(c.a)(J,2),U=H[0],W=H[1],$=i.useState(e.splitInDays),G=Object(c.a)($,2),K=G[0],Q=G[1],X=i.useState(!1),Z=Object(c.a)(X,2),ee=Z[0],te=Z[1],ne=Object(x.b)(),re=Object(d.a)();i.useEffect((function(){h(e.currency),D(e.countryCode)}),[e.currency,e.countryCode]);var ae=function(){var t=Object(o.a)(a.a.mark((function t(n){var r,o,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=K||1,o=new Date(B),c=new A.a({identifier:e.identifier,amount:C,amountBaseCurrency:R,currency:m,countryCode:S,categoryId:q,description:U,when:o.getTime(),budgetId:e.budgetId,splitInDays:r}),t.next=6,ne.getBudgetsStore();case 6:return i=t.sent,t.next=9,i.setExpenses(e.budgetId,[c]);case 9:return t.next=11,ne.getCurrenciesStore();case 11:t.t0=c.currency,t.sent.setLastCurrencyUsed(t.t0),e.onSubmit(c);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function oe(e){T(e.target.value),te(!0)}return i.createElement("form",{onSubmit:ae,autoComplete:"on"},i.createElement(u.a,{container:!0,justify:"space-between",alignItems:"baseline",alignContent:"stretch"},i.createElement(u.a,{item:!0},m&&i.createElement(j,{label:re("Amount"),baseCurrency:e.baseCurrency,amountInput:C,amountInBaseCurrency:R,selectedCurrency:m,onChange:function(e,t,n){h(t),w(e),z(n||0),te(!0)},onError:f})),i.createElement(u.a,{item:!0},i.createElement(F,{onCategoryChange:function(e){Y(e),te(!0)},selectedCategory:q})),i.createElement(u.a,{item:!0},i.createElement((function(){return i.createElement(l.a,{required:!0,label:re("When"),type:"date",value:B,InputLabelProps:{shrink:!0},onChange:oe})}),null)),i.createElement(u.a,{item:!0},S&&i.createElement(y,{selectedCountry:S,onCountryChange:function(e){D(e),te(!0)}})),i.createElement(u.a,{item:!0},i.createElement(l.a,{label:re("Description"),value:U||"",onChange:function(e){e.preventDefault(),W(e.target.value),te(!0)}})),i.createElement(u.a,{item:!0},i.createElement(l.a,{type:"number",label:re("Split in days"),value:K||"",helperText:function(){if(R&&K&&K>1)return"".concat(Object(g.a)(R/K,e.baseCurrency)," ").concat(re("per day"))}(),onChange:function(e){var t=parseInt(e.target.value);Q(t||void 0),te(!0)},inputProps:{min:1},disabled:!R}))),i.createElement(M.a,{type:"submit",color:"primary",disabled:void 0!==r||!ee}))}}}]);
//# sourceMappingURL=2.50731b94.chunk.js.map