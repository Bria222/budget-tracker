{"version":3,"sources":["views/expenses/ExpenseEdit.tsx"],"names":["ExpenseEdit","props","btApp","useAppContext","match","params","budgetId","expenseId","replace","history","budgetUrl","BudgetPath","budgetModel","useBudgetModel","React","expense","setExpense","loc","useLoc","a","getBudgetsStore","deleteExpense","path","DateDay","fromTimeMs","when","year","month","day","goBack","pathExpensesByDay","useHeaderContext","onClick","getExpense","onSubmit","baseCurrency","info","currency"],"mappings":"6SAkBaA,EAA0C,SAACC,GAEpD,IAAMC,EAAQC,cAFgD,EAIhCF,EAAMG,MAAMC,OAAnCC,EAJuD,EAIvDA,SAAUC,EAJ6C,EAI7CA,UAEVC,EADWP,EAAXQ,QACAD,QACDE,EAAY,IAAIC,IAAWL,GAC3BM,EAAcC,YAAeP,GAR2B,EAUhCQ,aAVgC,mBAUvDC,EAVuD,KAU9CC,EAV8C,KAWxDC,EAAMC,cAXkD,4CAa9D,sBAAAC,EAAA,sEACiBjB,EAAMkB,kBADvB,mBACwDd,EADxD,KACkEC,EADlE,gBAC0Cc,cAD1C,kBAEIb,EAAQE,EAAUY,MAFtB,4CAb8D,kEA2B9D,WAA4BP,GAA5B,qBAAAI,EAAA,wDAC+BI,IAAQC,WAAWT,EAAQU,MAA/CC,EADX,EACWA,KAAMC,EADjB,EACiBA,MAAOC,EADxB,EACwBA,IACpBC,YACI5B,EAAMQ,QACNC,EAAUoB,kBAAkBJ,EAAMC,EAAOC,IAJjD,4CA3B8D,sBAkC9D,OAhBAG,YAAiBd,EAAI,gBAAiB,gBAAC,IAAD,CAAce,QAlBU,6CAkBgB/B,GAE9Ea,aAAgB,WACRF,GACAI,EAAWJ,EAAYqB,WAAW1B,MAGvC,CAACK,EAAaL,IASbK,GAAeG,EACR,gBAAC,IAAD,eACHmB,SApCsD,4CAqCtDC,aAAcvB,EAAYwB,KAAKC,UAC3BtB,IAGD,gBAAC,IAAD,OAKAf","file":"static/js/35.380667d3.chunk.js","sourcesContent":["import * as React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { Expense } from \"../../api\";\nimport { DeleteButton } from \"../../components/buttons/DeleteButton\";\nimport { goBack } from \"../../domain/utils/goBack\";\nimport { BudgetPath } from \"../../domain/paths/BudgetPath\";\nimport { DateDay } from \"../../domain/DateDay\";\nimport { useBudgetModel } from \"../../hooks/useBudgetModel\";\nimport { ExpenseForm } from \"../../components/expenses/ExpenseForm\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { HeaderNotifierProps } from \"../../routes\";\nimport { useAppContext } from \"../../contexts/AppContext\";\nimport { useHeaderContext } from \"../../hooks/useHeaderContext\";\nimport { useLoc } from \"../../hooks/useLoc\";\n\ninterface ExpenseEditProps extends HeaderNotifierProps,\n    RouteComponentProps<{ budgetId: string; expenseId: string }> { }\n\nexport const ExpenseEdit: React.FC<ExpenseEditProps> = (props) => {\n    \n    const btApp = useAppContext();\n\n    const {budgetId, expenseId} = props.match.params;\n    const {history} = props;\n    const {replace} = history;\n    const budgetUrl = new BudgetPath(budgetId);\n    const budgetModel = useBudgetModel(budgetId);\n\n    const [expense, setExpense] = React.useState<Expense>();\n    const loc = useLoc();\n\n    async function handleDelete () {\n        await (await btApp.getBudgetsStore()).deleteExpense(budgetId, expenseId);\n        replace(budgetUrl.path);\n    }\n\n    useHeaderContext(loc('Edit expense'), <DeleteButton onClick={handleDelete}/>, props);\n\n    React.useEffect(() => {\n        if (budgetModel) {\n            setExpense(budgetModel.getExpense(expenseId));\n        }\n        // eslint-disable-next-line\n    }, [budgetModel, expenseId]);\n\n    async function handleSubmit(expense: Expense) {\n        const {year, month, day} = DateDay.fromTimeMs(expense.when);\n        goBack(\n            props.history, \n            budgetUrl.pathExpensesByDay(year, month, day));\n    }\n\n    if (budgetModel && expense) {\n        return <ExpenseForm \n            onSubmit={handleSubmit}\n            baseCurrency={budgetModel.info.currency}\n            {...expense}\n            />;\n    } else {\n        return <CircularProgress/>;\n    }\n    \n}\n\nexport default ExpenseEdit;\n"],"sourceRoot":""}