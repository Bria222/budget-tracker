(this["webpackJsonpbudget-tracker"]=this["webpackJsonpbudget-tracker"]||[]).push([[22],{143:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),s=n(18),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;Object(r.a)(this,e),this._date=void 0,this._date=new Date(t.getFullYear(),t.getMonth(),t.getDate())}return Object(s.a)(e,[{key:"clone",value:function(){return new e(this._date)}},{key:"addDays",value:function(e){return this._date.setDate(this._date.getDate()+e),this}},{key:"addMonths",value:function(e){return this._date.setMonth(this._date.getMonth()+e),this}},{key:"addYears",value:function(e){return this._date.setFullYear(this._date.getFullYear()+e),this}},{key:"equals",value:function(e){return this._date.getTime()===e._date.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"day",get:function(){return this._date.getDate()}},{key:"timeMs",get:function(){return this._date.getTime()}},{key:"isToday",get:function(){return e.isToday(this)}},{key:"shortString",get:function(){return new Intl.DateTimeFormat(void 0,{day:"numeric",month:"long",year:"numeric"}).format(this._date)}}],[{key:"fromTimeMs",value:function(t){return new e(new Date(t))}},{key:"fromYMD",value:function(t){return new e(new Date(t.year,t.month,t.day))}},{key:"isToday",value:function(e){var t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()}}]),e}()},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u}));var r=864e5;function s(e,t){return Math.floor((t-e)/r)+1}function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).toISOString().slice(0,10)}function i(e){return new Intl.DateTimeFormat(void 0,{month:"long"}).format(new Date(2e3,e,1))}function u(e,t){return new Intl.DateTimeFormat(void 0,{month:"long",year:"numeric"}).format(new Date(e,t,1))}},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),s=n(18),a=function(){function e(){Object(r.a)(this,e),this._total=void 0,this._subTotals=void 0,this._total=0,this._subTotals={}}return Object(s.a)(e,[{key:"add",value:function(e,t){this._total+=e;var n=this._getSubTotal(t);return n&&n.add(e,t),this._total}},{key:"subtract",value:function(e,t){return this.add(-e,t)}},{key:"_getSubTotal",value:function(t){if(void 0!==t){var n=t.shift();if(void 0!==n)return n in this._subTotals||(this._subTotals[n]=new e),this._subTotals[n]}}},{key:"getSubtotal",value:function(e){var t=e.shift();return void 0!==t?t in this._subTotals?this._subTotals[t].getSubtotal(e):0:this.total}},{key:"getAverage",value:function(e){var t=e.shift();return void 0!==t?t in this._subTotals?this._subTotals[t].getAverage(e):0:this.avg}},{key:"total",get:function(){return this._total}},{key:"avg",get:function(){return this._total/Object.keys(this._subTotals).length}},{key:"indexes",get:function(){return Object.keys(this._subTotals)}}]),e}()},165:function(e,t,n){"use strict";function r(e,t){return e/t}n.d(t,"a",(function(){return r}))},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(36),s=n(14),a=n(18),i=n(143);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(){function e(t){Object(s.a)(this,e),this._date=void 0,this.amount=void 0,this.amountBaseCurrency=void 0,this.currency=void 0,this.categoryId=void 0,this.countryCode=void 0,this.description=void 0,this.identifier=void 0,this.when=void 0,this.budgetId=void 0,this.splitInDays=void 0,this.identifier=t.identifier,this.amountBaseCurrency=t.amountBaseCurrency,this.amount=t.amount,this.currency=t.currency,this.categoryId=t.categoryId,this.countryCode=t.countryCode,this.description=t.description,this.when=t.when,this.budgetId=t.budgetId,this.splitInDays=t.splitInDays>0?t.splitInDays:1,this.validate()}return Object(a.a)(e,[{key:"inBudgetDates",value:function(e){return this.when<=e.to&&this.when>=e.from}},{key:"inDates",value:function(e,t){return this.when<=t&&this.when>=e}},{key:"addToTotals",value:function(e){var t=!0,n=!1,r=void 0;try{for(var s,a=this.split()[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var i=s.value;e.add(i.amountBaseCurrency,i.dateParts)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"subtractTotal",value:function(e){var t=!0,n=!1,r=void 0;try{for(var s,a=this.split()[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var i=s.value;e.subtract(i.amountBaseCurrency,i.dateParts)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"validate",value:function(){var e=[];if(void 0===this.budgetId&&e.push("budget identifier"),void 0===this.amountBaseCurrency&&e.push("amount in base currency"),2!==this.countryCode.length&&e.push("country code"),3!==this.currency.length&&e.push("currency code"),e.length>0)throw Error("Invalid expense (".concat(this.identifier,") fields: ").concat(e.join(", ")))}},{key:"split",value:function(){if(this.splitInDays<1)throw Error("You cannot split an expense in less than one piece");if(1===this.splitInDays)return[this];for(var t=this.amountBaseCurrency/this.splitInDays,n=this.amount/this.splitInDays,r=[new e(o({},this,{amount:n,amountBaseCurrency:t}))],s=1;s<this.splitInDays;s++)r.push(new e(o({},this,{amount:n,amountBaseCurrency:t,when:i.a.fromTimeMs(this.when).addDays(s).timeMs})));return r}},{key:"info",get:function(){var e=this.amount,t=this.amountBaseCurrency,n=this.categoryId,r=this.countryCode,s=this.currency;return{amount:e,amountBaseCurrency:t,categoryId:n,description:this.description,identifier:this.identifier,when:this.when,countryCode:r,currency:s,budgetId:this.budgetId,splitInDays:this.splitInDays}}},{key:"json",get:function(){return JSON.stringify(this.info)}},{key:"date",get:function(){return this._date||(this._date=i.a.fromTimeMs(this.when)),this._date}},{key:"day",get:function(){return this.date.day}},{key:"month",get:function(){return this.date.month}},{key:"year",get:function(){return this.date.year}},{key:"dateParts",get:function(){return[this.year,this.month,this.day]}}],[{key:"sum",value:function(e){return Object.values(e).map((function(e){return e.amountBaseCurrency})).reduce((function(e,t){return e+t}))}}]),e}()},211:function(e,t,n){"use strict";var r=n(55),s=n(56);function a(e,t,n){return(a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Object(s.a)(a,n.prototype),a}).apply(null,arguments)}function i(e){var t="function"===typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return a(e,arguments,Object(r.a)(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Object(s.a)(i,e)})(e)}n.d(t,"a",(function(){return i}))},212:function(e,t,n){"use strict";var r=n(36),s=n(2),a=n.n(s),i=n(4),u=n(14),o=n(18),c=n(150),h=n(153),f=n(182),d=n(165),l=n(60),p=n(55),y=n(59),v=n(211),g=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(o.a)(t,[{key:"addExpense",value:function(e){var t=e.year,n=this.get(t);void 0===n&&(n=new b,this.set(t,n)),n.addExpense(e)}},{key:"deleteExpense",value:function(e){var t=e.year,n=this.get(t);return!(!n||!n.deleteExpense(e))&&(0===n.size&&this.delete(t),!0)}},{key:"getExpenses",value:function(e){var t=e.year,n=e.month,r=e.day,s=this.get(t);if(s){var a=s.get(n);if(a)return a.get(r)}}},{key:"getAllGroupedByDate",value:function(e,n,r){var s=new x;if(void 0===n){var a=this.get(e);if(a){var i=!0,u=!1,o=void 0;try{for(var c,h=a.values()[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var f=c.value;t.addDailyExpensesByDate(f,s)}}catch(y){u=!0,o=y}finally{try{i||null==h.return||h.return()}finally{if(u)throw o}}}}else if(void 0===r){var d=this.get(e);if(d){var l=d.get(n);l&&t.addDailyExpensesByDate(l,s)}}else{var p=this.getExpenses({year:e,month:n,day:r});p&&t.addExpensesByDate(p.values(),s)}return s}},{key:"getExpense",value:function(e,t){var n=this.getExpenses(e);if(n)return n.get(t)}},{key:"getMonths",value:function(e){var t=this.get(e);return t?t.keys():[]}},{key:"getDays",value:function(e,t){var n=this.get(e);if(n){var r=n.get(t);return r?r.keys():[]}return[]}},{key:"years",get:function(){return this.keys()}}],[{key:"addDailyExpensesByDate",value:function(e,n){var r=!0,s=!1,a=void 0;try{for(var i,u=e.values()[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value;t.addExpensesByDate(o.values(),n)}}catch(c){s=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(s)throw a}}}},{key:"addExpensesByDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new x,n=!0,r=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value,o=t.get(u.when);o||(o=new Map,t.set(u.when,o)),o.set(u.identifier,u)}}catch(c){r=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return t}}]),t}(Object(v.a)(Map)),b=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(o.a)(t,[{key:"addExpense",value:function(e){var t=e.month,n=this.get(t);void 0===n&&(n=new x,this.set(t,n)),n.addExpense(e)}},{key:"deleteExpense",value:function(e){var t=e.month,n=this.get(t);return!(!n||!n.deleteExpense(e))&&(0===n.size&&this.delete(t),!0)}}]),t}(Object(v.a)(Map)),x=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(o.a)(t,[{key:"addExpense",value:function(e){var t=e.day,n=this.get(t);void 0===n&&(n=new Map,this.set(t,n)),n.set(e.identifier,e)}},{key:"deleteExpense",value:function(e){var t=e.day,n=e.identifier,r=this.get(t);return!(!r||!r.delete(n))&&(0===r.size&&this.delete(t),!0)}}]),t}(Object(v.a)(Map));n.d(t,"a",(function(){return k}));var k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(u.a)(this,e),this._info=void 0,this._expenses=void 0,this._expenseGroups=void 0,this._nestedTotalExpenses=void 0,this._days=void 0,this._totalDays=void 0,this._info=t,this._expenses=new Map;var r=!0,s=!1,a=void 0;try{for(var i,o=n[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;this._expenses.set(c.identifier,new f.a(c))}}catch(h){s=!0,a=h}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}}return Object(o.a)(e,[{key:"getTotalExpenses",value:function(e,t,n){var r=[e];return void 0!==t&&r.push(t),void 0!==n&&r.push(n),this.nestedTotalExpenses.getSubtotal(r)}},{key:"getExpensesByDay",value:function(e,t,n){return void 0===e?g.addExpensesByDate(this._expenses.values()):this.expenseGroups.getAllGroupedByDate(e,t,n)}},{key:"_updateTotalExpenses",value:function(e,t){void 0!==t&&t.splitInDays===e.splitInDays&&t.amountBaseCurrency===e.amountBaseCurrency&&t.when===e.when&&t.categoryId===e.categoryId&&t.countryCode===e.countryCode||(t&&this._subtractTotal(t),this._addToTotal(e))}},{key:"setExpense",value:function(e){var t=new f.a(e),n=this._expenses.get(e.identifier);if(n){var r=n.split(),s=!0,a=!1,i=void 0;try{for(var u,o=r[Symbol.iterator]();!(s=(u=o.next()).done);s=!0){var c=u.value;this.expenseGroups.deleteExpense(c)}}catch(g){a=!0,i=g}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}this._updateTotalExpenses(t,n)}else this._updateTotalExpenses(t);var h=!0,d=!1,l=void 0;try{for(var p,y=t.split()[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var v=p.value;this.expenseGroups.addExpense(v)}}catch(g){d=!0,l=g}finally{try{h||null==y.return||y.return()}finally{if(d)throw l}}this._expenses.set(e.identifier,t)}},{key:"getExpense",value:function(e){var t=this._expenses.get(e);if(t)return t;throw new Error('Expense with ID "'.concat(e,'" not found'))}},{key:"deleteExpense",value:function(e){var t=this._expenses.get(e);return!(!t||!this._expenses.delete(e))&&(this._subtractTotal(t),this.expenseGroups.deleteExpense(t),!0)}},{key:"_updateExpensesBaseAmount",value:function(t){var n=new h.a,r=!0,s=!1,a=void 0;try{for(var i,u=this._expenses.values()[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value;o.amountBaseCurrency=e._getBaseAmount(o,t),o.addToTotals(n)}}catch(c){s=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(s)throw a}}this._nestedTotalExpenses=n}},{key:"_addToTotal",value:function(e){e.inBudgetDates(this._info)&&e.addToTotals(this.nestedTotalExpenses)}},{key:"_subtractTotal",value:function(e){e.inBudgetDates(this._info)&&e.subtractTotal(this.nestedTotalExpenses)}},{key:"setBudget",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.identifier===this.identifier){e.next=2;break}throw new Error("Cannot update budget information with different IDs");case 2:if(t.currency===this._info.currency){e.next=7;break}if(n){e.next=5;break}throw new Error("Required conversion rates to update budget currency");case 5:this._updateExpensesBaseAmount(n),this._info.currency=t.currency;case 7:return this._info.name=t.name,this._info.total=t.total,this._info.from!==t.from&&(this._days=this._totalDays=void 0,this._info.from=t.from),this._info.to!==t.to&&(this._days=this._totalDays=void 0,this._info.to=t.to),e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"export",value:function(e){var t={};return this._expenses.forEach((function(e,n){return t[n]=e.info})),{budgets:Object(r.a)({},this.identifier,this.info),expenses:t,categories:e,lastTimeSaved:Date.now()}}},{key:"numberOfExpenses",get:function(){return this._expenses.size}},{key:"identifier",get:function(){return this._info.identifier}},{key:"currency",get:function(){return this._info.currency}},{key:"from",get:function(){return this._info.from}},{key:"name",get:function(){return this._info.name}},{key:"to",get:function(){return this._info.to}},{key:"total",get:function(){return this._info.total}},{key:"info",get:function(){return this._info}},{key:"expenses",get:function(){return this._expenses.values()}},{key:"totalExpenses",get:function(){return this.nestedTotalExpenses.total}},{key:"nestedTotalExpenses",get:function(){var e=this;return void 0===this._nestedTotalExpenses&&(this._nestedTotalExpenses=new h.a,this._expenses.forEach((function(t){return e._addToTotal(t)}))),this._nestedTotalExpenses}},{key:"daysUntilToday",get:function(){return this._days||(this._days=Object(c.a)(this._info.from,Date.now())),this._days}},{key:"totalDays",get:function(){return this._totalDays||(this._totalDays=Object(c.a)(this._info.from,this._info.to)),this._totalDays}},{key:"average",get:function(){return this.daysUntilToday>0&&this.totalExpenses>0?Math.round(this.totalExpenses/this.daysUntilToday):0}},{key:"expectedDailyExpensesAverage",get:function(){return Math.round(this._info.total/this.totalDays)}},{key:"expenseGroups",get:function(){if(!this._expenseGroups){var e=new g;this._expenses.forEach((function(t){return t.split().forEach((function(t){return e.addExpense(t)}))})),this._expenseGroups=e}return this._expenseGroups}}],[{key:"_getBaseAmount",value:function(e,t){var n=e.currency,r=e.amount;if(t.base===n)return r;var s=t.rates[n];if(void 0===s)throw new Error("Cannot get currency exchange rate from ".concat(t.base," to ").concat(n));return Object(d.a)(r,s)}}]),e}()},269:function(e,t,n){"use strict";n.r(t),n.d(t,"BudgetsStoreImpl",(function(){return l}));var r=n(36),s=n(16),a=n(2),i=n.n(a),u=n(4),o=n(14),c=n(18),h=n(212);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(t){Object(o.a)(this,e),this._budgetModels=void 0,this._app=void 0,this._storage=void 0,this._budgetModels=new Map,this._app=t,this._storage=t.storage,this._storage.addObserver(this)}return Object(c.a)(e,[{key:"onStorageDataChanged",value:function(){this._budgetModels.clear()}},{key:"getBudgetsIndex",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._storage.getBudgets());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBudgetModel",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this._budgetModels.get(t))){e.next=14;break}return e.next=4,this._storage.getBudget(t);case 4:return r=e.sent,e.next=7,this._storage.getExpenses(t);case 7:if(s=e.sent,!r){e.next=13;break}n=new h.a(r,Object.values(s)),this._budgetModels.set(t,n),e.next=14;break;case 13:throw new Error("Budget not found: "+t);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setBudget",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._budgetModels.get(t.identifier))){e.next=14;break}if(r=void 0,n.currency===t.currency){e.next=10;break}return e.next=6,this._app.getCurrenciesStore();case 6:return e.t0=t.currency,e.next=9,e.sent.getRates(e.t0);case 9:r=e.sent;case 10:return e.next=12,n.setBudget(t,r);case 12:e.next=15;break;case 14:this._budgetModels.set(t.identifier,new h.a(t));case 15:return e.abrupt("return",this._storage.setBudget(t));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExpenses",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t);case 2:return e.abrupt("return",e.sent.expenses);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExpensesByDay",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t);case 2:if(!(r=e.sent).expenseGroups){e.next=7;break}if(!(s=r.expenseGroups.getExpenses(n))){e.next=7;break}return e.abrupt("return",s);case 7:throw new Error("No expenses found");case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setExpenses",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,s,a,u,o,c,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t);case 2:for(r=e.sent,s=!0,a=!1,u=void 0,e.prev=6,o=n[Symbol.iterator]();!(s=(c=o.next()).done);s=!0)h=c.value,r.setExpense(h);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),a=!0,u=e.t0;case 14:e.prev=14,e.prev=15,s||null==o.return||o.return();case 17:if(e.prev=17,!a){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.abrupt("return",this._storage.setExpenses(n));case 23:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getExpense",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t);case 2:return e.t0=n,e.abrupt("return",e.sent.getExpense(e.t0));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteBudget",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._budgetModels.delete(t),e.abrupt("return",this._storage.deleteBudget(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteExpense",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t);case 2:return e.sent.deleteExpense(n),e.abrupt("return",this._storage.deleteExpense(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setBudgets",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return n.setBudget(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setExpensesList",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return n.setExpense(e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setExpense",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBudgetModel(t.budgetId);case 2:return e.sent.setExpense(t),e.abrupt("return",this._storage.setExpenses([t]));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"import",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.budgets,r=t.expenses,a=t.categories,u=Object.entries(a).map((function(e){var t=Object(s.a)(e,2);return d({identifier:t[0]},t[1])})),e.t0=Promise,e.t1=this.setBudgets(Object.values(n)),e.t2=this.setExpensesList(Object.values(r)),e.next=7,this._app.getCategoriesStore();case 7:return e.t3=u,e.t4=e.sent.setCategories(e.t3),e.t5=[e.t1,e.t2,e.t4],e.next=12,e.t0.all.call(e.t0,e.t5);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s,a,u,o,c,h,f,d,l,p,y,v=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0={},e.t1={},e.next=4,this._app.getCategoriesStore();case 4:return e.next=6,e.sent.getCategories();case 6:return e.t2=e.sent,e.t3=Date.now(),t={budgets:e.t0,expenses:e.t1,categories:e.t2,lastTimeSaved:e.t3},e.t4=Promise,e.t5=Object,e.next=13,this.getBudgetsIndex();case 13:return e.t6=e.sent,e.t7=function(e){return v.getBudgetModel(e)},e.t8=e.t5.keys.call(e.t5,e.t6).map(e.t7),e.next=18,e.t4.all.call(e.t4,e.t8);case 18:n=e.sent,r=!0,s=!1,a=void 0,e.prev=22,u=n[Symbol.iterator]();case 24:if(r=(o=u.next()).done){e.next=49;break}for(c=o.value,t.budgets[c.identifier]=c.info,h=!0,f=!1,d=void 0,e.prev=30,l=c.expenses[Symbol.iterator]();!(h=(p=l.next()).done);h=!0)y=p.value,t.expenses[y.identifier]=y.info;e.next=38;break;case 34:e.prev=34,e.t9=e.catch(30),f=!0,d=e.t9;case 38:e.prev=38,e.prev=39,h||null==l.return||l.return();case 41:if(e.prev=41,!f){e.next=44;break}throw d;case 44:return e.finish(41);case 45:return e.finish(38);case 46:r=!0,e.next=24;break;case 49:e.next=55;break;case 51:e.prev=51,e.t10=e.catch(22),s=!0,a=e.t10;case 55:e.prev=55,e.prev=56,r||null==u.return||u.return();case 58:if(e.prev=58,!s){e.next=61;break}throw a;case 61:return e.finish(58);case 62:return e.finish(55);case 63:return e.abrupt("return",t);case 64:case"end":return e.stop()}}),e,this,[[22,51,55,63],[30,34,38,46],[39,,41,45],[56,,58,62]])})));return function(){return e.apply(this,arguments)}}()}]),e}()}}]);
//# sourceMappingURL=22.763d7f86.chunk.js.map