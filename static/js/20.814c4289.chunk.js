(this["webpackJsonpbudget-tracker"]=this["webpackJsonpbudget-tracker"]||[]).push([[20],{140:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(0);function r(t,e,n){Object(a.useEffect)((function(){return n.onTitleChange(t),n.onActions(e),function(){n.onTitleChange(""),n.onActions(void 0)}}),[])}},141:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";t.length>2?t.goBack():t.replace(e)}},143:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(14),r=n(18),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;Object(a.a)(this,t),this._date=void 0,this._date=new Date(e.getFullYear(),e.getMonth(),e.getDate())}return Object(r.a)(t,[{key:"clone",value:function(){return new t(this._date)}},{key:"addDays",value:function(t){return this._date.setDate(this._date.getDate()+t),this}},{key:"addMonths",value:function(t){return this._date.setMonth(this._date.getMonth()+t),this}},{key:"addYears",value:function(t){return this._date.setFullYear(this._date.getFullYear()+t),this}},{key:"equals",value:function(t){return this._date.getTime()===t._date.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"day",get:function(){return this._date.getDate()}},{key:"timeMs",get:function(){return this._date.getTime()}},{key:"isToday",get:function(){return t.isToday(this)}},{key:"shortString",get:function(){return new Intl.DateTimeFormat(void 0,{day:"numeric",month:"long",year:"numeric"}).format(this._date)}}],[{key:"fromTimeMs",value:function(e){return new t(new Date(e))}},{key:"fromYMD",value:function(e){return new t(new Date(e.year,e.month,e.day))}},{key:"isToday",value:function(t){var e=new Date;return t.day===e.getDate()&&t.month===e.getMonth()&&t.year===e.getFullYear()}}]),t}()},144:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s}));var a=n(0),r=n(52),u=n.n(r),i=n(141),o=n(94),c=function(t){return a.createElement(o.a,Object.assign({color:"inherit","aria-label":"Close"},t,{onClick:t.onClick}),a.createElement(u.a,null))},s=function(t){return a.createElement(c,{onClick:function(){Object(i.a)(t.history,t.to)}})}},146:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2),r=n.n(a),u=n(4),i=n(16),o=n(0),c=n(40);function s(){var t=Object(o.useState)(),e=Object(i.a)(t,2),n=e[0],a=e[1],s=Object(c.b)();return Object(o.useEffect)((function(){function t(){return(t=Object(u.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,s.getBudgetsStore();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var e=!0;return e&&function(){t.apply(this,arguments)}(),function(){e=!1}}),[n,s]),Object(o.useEffect)((function(){var t=!0,e={onStorageDataChanged:function(){a(void 0)}};return t&&s.storage.addObserver(e),function(){t=!1,s.storage.deleteObserver(e)}}),[s]),n}},151:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2),r=n.n(a),u=n(4),i=n(16),o=n(0),c=n(146);function s(t){var e=Object(c.a)(),n=Object(o.useState)(),a=Object(i.a)(n,2),s=a[0],l=a[1];return Object(o.useEffect)((function(){function n(){return(n=Object(u.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,n.getBudgetModel(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(t){var a=!0;return a&&(e?function(t){n.apply(this,arguments)}(e):l(void 0)),function(){a=!1}}}),[t,e]),s}},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2),r=n.n(a),u=n(4),i=n(16),o=n(0),c=n(40);function s(){var t=Object(c.b)(),e=Object(o.useState)(),n=Object(i.a)(e,2),a=n[0],s=n[1];return Object(o.useEffect)((function(){function e(){return(e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,t.getCategoriesStore();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n=!0;return n&&function(){e.apply(this,arguments)}(),function(){n=!1}}),[t,a]),a}},153:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(14),r=n(18),u=function(){function t(){Object(a.a)(this,t),this._total=void 0,this._subTotals=void 0,this._total=0,this._subTotals={}}return Object(r.a)(t,[{key:"add",value:function(t,e){this._total+=t;var n=this._getSubTotal(e);return n&&n.add(t,e),this._total}},{key:"subtract",value:function(t,e){return this.add(-t,e)}},{key:"_getSubTotal",value:function(e){if(void 0!==e){var n=e.shift();if(void 0!==n)return n in this._subTotals||(this._subTotals[n]=new t),this._subTotals[n]}}},{key:"getSubtotal",value:function(t){var e=t.shift();return void 0!==e?e in this._subTotals?this._subTotals[e].getSubtotal(t):0:this.total}},{key:"getAverage",value:function(t){var e=t.shift();return void 0!==e?e in this._subTotals?this._subTotals[e].getAverage(t):0:this.avg}},{key:"total",get:function(){return this._total}},{key:"avg",get:function(){return this._total/Object.keys(this._subTotals).length}},{key:"indexes",get:function(){return Object.keys(this._subTotals)}}]),t}()},166:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2),r=n.n(a),u=n(4),i=n(16),o=n(0),c=n(152);function s(){var t=Object(o.useState)(),e=Object(i.a)(t,2),n=e[0],a=e[1],s=Object(c.a)();return Object(o.useEffect)((function(){function t(){return(t=Object(u.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCategories();case 2:n=t.sent,a(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s&&function(e){t.apply(this,arguments)}(s)}),[s]),n}},210:function(t,e,n){"use strict";var a=n(0),r=n.n(a),u=n(134),i=n(153);var o=n(175),c=function(t){return a.createElement(o.a,{type:"percentage",title:t.title,onDataSelect:function(e){t.onSelect&&t.onSelect(e.label)},maxSlices:t.maxSlices||8,data:{labels:t.labels,datasets:[{values:t.values}]}})},s=n(51);var l=function(t){var e=Object(s.a)(),n=t.budget,r=t.categories,o=a.useMemo((function(){if(r&&Object.keys(r).length>0){var t=[],e=[],a=function(t){var e=new i.a,n=!0,a=!1,r=void 0;try{for(var u,o=t.expenses[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var c=u.value;e.add(c.amountBaseCurrency,[c.categoryId])}}catch(s){a=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return e}(n);return a.indexes.forEach((function(n){t.push(function(t,e){return e[t]?e[t].name:t}(n,r)),e.push(Math.round(a.getSubtotal([n])))})),{labels:t,values:e}}}),[n,r]);return o?a.createElement(c,Object.assign({title:e("By category")},o,{onSelect:function(t){console.log(t)}})):a.createElement(u.a,null)},f=n(143);var d=function(t){var e=t.budget,n=Object(s.a)(),r=a.useMemo((function(){var t=function(t){var e=new i.a,n=Math.min((new f.a).timeMs,t.to),a=!0,r=!1,u=void 0;try{for(var o,c=t.expenses[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value;s.inDates(t.from,n)&&e.add(s.amountBaseCurrency,[s.countryCode])}}catch(l){r=!0,u=l}finally{try{a||null==c.return||c.return()}finally{if(r)throw u}}return e}(e),n=t.indexes,a=[],r=[];return n.forEach((function(e){a.push(e),r.push(Math.round(t.getSubtotal([e])))})),{labels:a,values:r}}),[e]);return a.createElement(c,Object.assign({title:n("By country")},r))},v=function(t){return r.a.createElement(o.a,{title:t.title,lineOptions:{hideDots:1,areaFill:1,heatline:1,dotSize:0,hideLine:0,regionFill:1},type:"line",axisOptions:{xAxisMode:"tick",yAxisMode:"tick",xIsSeries:1},data:{labels:t.labels.map((function(t){return t.shortString})),datasets:[{values:t.values}]}})},h=function(t){var e=t.budget,n=Object(s.a)(),r=a.useMemo((function(){for(var t=e.from,n=e.to,a=Date.now(),r=[],u=[],i=new Date(t);i.getTime()<=n&&i.getTime()<=a;i.setDate(i.getDate()+1)){var o=new f.a(i),c=o.year,s=o.month,l=o.day,d=e.nestedTotalExpenses.getSubtotal([c,s,l]);r.push(new f.a(i)),u.push(Math.round(d))}return{labels:r,values:u}}),[e]);return a.createElement(v,Object.assign({title:n("By date")},r,{avg:e.average,expectedAvg:e.expectedDailyExpensesAverage}))},b=n(16);var g=function(t){var e=t.budget,n=Object(s.a)(),r=a.useMemo((function(){var t=function(t){var e={},n=t.expenseGroups,a=t.from,r=Date.now(),u=f.a.fromTimeMs(a),i=new Set;do{var o=n.getExpenses(u);o&&(i.clear(),o.forEach((function(t){return i.add(t.countryCode)})),i.forEach((function(t){return e[t]=(e[t]||0)+1}))),u.addDays(1)}while(u.timeMs<=r);return e}(e),n=[],a=[];return Object.entries(t).forEach((function(t){var e=Object(b.a)(t,2),r=e[0],u=e[1];n.push(r),a.push(Math.round(u))})),{labels:n,values:a}}),[e]);return a.createElement(c,Object.assign({title:n("Days in a country")},r))},y=n(197);var m=function(t){return r.a.createElement(o.a,{title:t.title,type:"bar",data:{labels:t.labels,datasets:[{values:t.values}]}})},p=function(t){var e=t.budget,n=Object(s.a)(),r=a.useMemo((function(){var t=function(t){var e=new i.a,n=Math.min((new f.a).timeMs,t.to),a=t.from,r=t.expenseGroups,u=!0,o=!1,c=void 0;try{for(var s,l=r[Symbol.iterator]();!(u=(s=l.next()).done);u=!0){var d=s.value,v=Object(b.a)(d,2),h=v[0],g=v[1],y=!0,m=!1,p=void 0;try{for(var O,j=g[Symbol.iterator]();!(y=(O=j.next()).done);y=!0){var E=O.value,k=Object(b.a)(E,2),w=k[0],x=k[1],S=!0,_=!1,M=void 0;try{for(var D,T=x[Symbol.iterator]();!(S=(D=T.next()).done);S=!0){var C=D.value,B=Object(b.a)(C,2),A=B[0],F=B[1],Y=void 0,I=0,G=!0,J=!1,q=void 0;try{for(var z,L=F.values()[Symbol.iterator]();!(G=(z=L.next()).done);G=!0){var V=z.value,H=V.countryCode,K=V.amountBaseCurrency;if(!V.inDates(a,n)||Y&&Y!==H){I=0;break}Y=H,I+=K}}catch(P){J=!0,q=P}finally{try{G||null==L.return||L.return()}finally{if(J)throw q}}I&&Y&&e.add(I,[Y,f.a.fromYMD({year:h,month:w,day:A}).shortString])}}catch(P){_=!0,M=P}finally{try{S||null==T.return||T.return()}finally{if(_)throw M}}}}catch(P){m=!0,p=P}finally{try{y||null==j.return||j.return()}finally{if(m)throw p}}}}catch(P){o=!0,c=P}finally{try{u||null==l.return||l.return()}finally{if(o)throw c}}var N={};return e.indexes.forEach((function(t){return N[t]=e.getAverage([t])})),N}(e);return{labels:Object.keys(t),values:Object.values(t).map((function(t){return Math.round(t)}))}}),[e]);return r?a.createElement(m,Object.assign({title:n("Daily avg country")},r)):a.createElement(u.a,null)};n.d(e,"a",(function(){return O}));var O=function(t){var e=t.budget,n=t.categories;return a.createElement(y.a,{container:!0,spacing:3},a.createElement(y.a,{item:!0,xs:12,sm:6},n&&a.createElement(l,{budget:e,categories:n})),a.createElement(y.a,{item:!0,xs:12,sm:6},a.createElement(p,{budget:e})),a.createElement(y.a,{item:!0,xs:12,sm:6},a.createElement(d,{budget:e})),a.createElement(y.a,{item:!0,xs:12,sm:6},a.createElement(g,{budget:e})),a.createElement(y.a,{item:!0,xs:12,sm:12},a.createElement(h,{budget:e})))}},259:function(t,e,n){"use strict";n.r(e),n.d(e,"BudgetStatsView",(function(){return d}));var a=n(0),r=n(151),u=n(29),i=n(144),o=n(210),c=n(134),s=n(51),l=n(140),f=n(166),d=function(t){var e=t.match,n=t.history,d=e.params.budgetId,v=new u.a(d),h=Object(r.a)(d),b=Object(f.a)(),g=Object(s.a)();return a.useEffect((function(){return h&&t.onTitleChange("".concat(g("Statistics"),": ").concat(h.name))}),[h]),Object(l.a)("".concat(g("Statistics")),a.createElement(i.b,{history:n,to:v.path}),t),void 0===h?a.createElement(c.a,null):a.createElement(o.a,{budget:h,categories:b})};e.default=d}}]);
//# sourceMappingURL=20.814c4289.chunk.js.map