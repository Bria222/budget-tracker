(this["webpackJsonpbudget-tracker"]=this["webpackJsonpbudget-tracker"]||[]).push([[16],{142:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(36),a=n(0),o=n(41),c=n(195),i=n(94);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t={component:e.to?o.b:void 0};return e.onClick&&e.to&&console.warn("Button should not have both onClick and href properties"),t}var f=function(e){return a.createElement(i.a,Object.assign({color:"inherit"},e,l(e)),e.icon&&a.createElement(e.icon,null))};var d=function(e){return a.createElement(c.a,Object.assign({style:s({position:"fixed",bottom:"1rem",zIndex:10},(t=e.color,"primary"===t||void 0===t?{right:"1rem"}:{left:"1rem"})),color:e.color||"secondary"},e,l(e)),e.children);var t}},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),a=n(18),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;Object(r.a)(this,e),this._date=void 0,this._date=new Date(t.getFullYear(),t.getMonth(),t.getDate())}return Object(a.a)(e,[{key:"clone",value:function(){return new e(this._date)}},{key:"addDays",value:function(e){return this._date.setDate(this._date.getDate()+e),this}},{key:"addMonths",value:function(e){return this._date.setMonth(this._date.getMonth()+e),this}},{key:"addYears",value:function(e){return this._date.setFullYear(this._date.getFullYear()+e),this}},{key:"equals",value:function(e){return this._date.getTime()===e._date.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"day",get:function(){return this._date.getDate()}},{key:"timeMs",get:function(){return this._date.getTime()}},{key:"isToday",get:function(){return e.isToday(this)}},{key:"shortString",get:function(){return new Intl.DateTimeFormat(void 0,{day:"numeric",month:"long",year:"numeric"}).format(this._date)}}],[{key:"fromTimeMs",value:function(t){return new e(new Date(t))}},{key:"fromYMD",value:function(t){return new e(new Date(t.year,t.month,t.day))}},{key:"isToday",value:function(e){var t=new Date;return e.day===t.getDate()&&e.month===t.getMonth()&&e.year===t.getFullYear()}}]),e}()},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(i.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(u.b)();return Object(i.useEffect)((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,s.getBudgetsStore();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=!0;return t&&function(){e.apply(this,arguments)}(),function(){t=!1}}),[n,s]),Object(i.useEffect)((function(){var e=!0,t={onStorageDataChanged:function(){r(void 0)}};return e&&s.storage.addObserver(t),function(){e=!1,s.storage.deleteObserver(t)}}),[s]),n}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=864e5;function a(e,t){return Math.floor((t-e)/r)+1}function o(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).toISOString().slice(0,10)}function c(e){return new Intl.DateTimeFormat(void 0,{month:"long"}).format(new Date(2e3,e,1))}function i(e,t){return new Intl.DateTimeFormat(void 0,{month:"long",year:"numeric"}).format(new Date(e,t,1))}},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(146);function s(e){var t=Object(u.a)(),n=Object(i.useState)(),r=Object(c.a)(n,2),s=r[0],l=r[1];return Object(i.useEffect)((function(){function n(){return(n=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,n.getBudgetModel(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(e){var r=!0;return r&&(t?function(e){n.apply(this,arguments)}(t):l(void 0)),function(){r=!1}}}),[e,t]),s}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(40);function s(){var e=Object(u.b)(),t=Object(i.useState)(),n=Object(c.a)(t,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){function t(){return(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,e.getCategoriesStore();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e,r]),r}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(157),o=n.n(a),c=n(142),i=function(e){return r.createElement(c.b,Object.assign({"aria-label":"Add"},e,{color:"primary"}),r.createElement(o.a,null))}},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(4),c=n(16),i=n(0),u=n(152);function s(){var e=Object(i.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(u.a)();return Object(i.useEffect)((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCategories();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&function(t){e.apply(this,arguments)}(s)}),[s]),n}},167:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n.n(a),c=n(4),i=n(16),u=n(40);t.a=function(e){var t=e.name,n=function(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],s=n[1],l=Object(u.b)();return Object(r.useEffect)((function(){function t(){return(t=Object(c.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.getIconsStore();case 2:n=t.sent,s(n.getIcon(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=!0;return n&&function(){t.apply(this,arguments)}(),function(){n=!1}}),[e,l]),a}(t);return r.createElement(r.Suspense,{fallback:t},n?r.createElement(n.Icon,{style:{color:n.color}}):null)}},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(216),o=n(197),c=n(133);function i(e,t){return t?e/t*100:0}var u=function(e){return r.createElement(c.a,{variant:"body2",noWrap:!0},e.text,e.secondary&&r.createElement(c.a,{variant:"caption",color:"textSecondary"},e.secondary))},s=function(e){var t=e.spent,n=e.total,c=e.title,s=t>n;return r.createElement(r.Fragment,null,r.createElement(o.a,{container:!0,justify:"space-between",direction:"row"},r.createElement(u,{text:Math.round(t)}),r.createElement(u,{text:c,secondary:" (".concat(Math.round(n),")")}),r.createElement(u,{text:Math.round(n-t)})),r.createElement(a.a,{color:s?"secondary":"primary",variant:"determinate",value:s?100:i(t,n)}))}},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={};function a(e,t){return function(e){return e in r||(r[e]=new Intl.NumberFormat(void 0,{style:"currency",currency:e})),r[e]}(t).format(e)}},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),o=n(41),c=n(179),i=function(e){return a.a.createElement(c.a,{component:o.b,to:e.to},e.children)}},319:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(29),o=n(151),c=n(16),i=n(148),u=n(130),s=n(217),l=n(93),f=n(231),d=n(10),m=n(65),y=n(167),p=n(173),v=n(232),g=n(186),h=function(e){var t=e.expense,n=e.budget,o=e.categories,i=t.categoryId,u=t.identifier,h=new a.a(e.budget.identifier),b=new m.a(u,h),E=r.useState(),O=Object(c.a)(E,2),j=O[0],w=O[1];var x=r.useMemo((function(){return o[i]}),[i,o]);return j?r.createElement(d.a,{push:!0,to:j}):r.createElement(l.a,{divider:!0,button:!0,onClick:function(){return w(b.path)},id:u},x&&r.createElement(f.a,null,r.createElement(v.a,{style:{backgroundColor:"#eee"}},r.createElement(y.a,{name:x.icon}))),r.createElement(s.a,{primary:x&&r.createElement(g.a,{to:h.pathExpensesByCategory(x.identifier)},x.name),secondary:t.description,secondaryTypographyProps:{noWrap:!0}}),r.createElement(s.a,{style:{textAlign:"right"},primary:t.amountBaseCurrency.toLocaleString(),secondary:!(n.currency===t.currency)&&Object(p.a)(t.amount,t.currency)}))},b=n(230),E=function(e){return r.createElement(r.Fragment,null,r.createElement(b.a,{component:"div",id:"subheader-".concat(e.name)},e.name),Array.from(e.expenses).map((function(t){return r.createElement(h,{key:"expense-".concat(t.identifier),expense:t,budget:e.budget,categories:e.categories})})))},O=function(e){return r.createElement(u.a,{style:{height:"100%",backgroundColor:"#fff",position:"relative",overflow:"auto",listStyleType:"none"}},Object(i.a)(e.expensesByGroup.entries()).map((function(t){var n=Object(c.a)(t,2),a=n[0],o=n[1];return r.createElement(E,{key:"lg-".concat(a),name:a,budget:e.budget,expenses:o.values(),categories:e.categories})})))},j=n(133),w=n(51),x=n(136),D=n(170),S=function(e){var t=e.budget,n=e.categoryId,a=e.categories,o=r.useState(),i=Object(c.a)(o,2),u=i[0],s=i[1],l=r.useState(0),f=Object(c.a)(l,2),d=f[0],m=f[1],y=Object(w.a)();return r.useEffect((function(){e.onTitleChange("".concat(y("Expenses in")," ").concat(a&&a[n].name))}),[n,a]),r.useEffect((function(){var e=new Map,r=0,a=!0,o=!1,c=void 0;try{for(var i,u=t.expenses[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var l=i.value;if(l.categoryId===n){var f=l.date.shortString,d=e.get(f);d||(d=new Map,e.set(f,d)),d.set(l.identifier,l),r+=l.amountBaseCurrency}}}catch(y){o=!0,c=y}finally{try{a||null==u.return||u.return()}finally{if(o)throw c}}s(e),m(r)}),[t,n]),u?r.createElement(r.Fragment,null,r.createElement(x.a,{padding:1,marginBottom:2},r.createElement(D.a,{title:y("Spent"),spent:d,total:t.totalExpenses})),r.createElement(O,{budget:t.info,expensesByGroup:u,categories:a})):r.createElement(j.a,null,y("No expenses"))},k=n(143),M=n(197),T=n(142),_=n(233),I=n.n(_),F=n(235),Y=n.n(F),B=n(234),C=n.n(B),P=n(150),A=function(e){var t=e.year,n=e.month,o=e.day,i=e.budget,u=e.categories,s=e.onTitleChange,l=new a.a(i.identifier),f=Object(w.a)(),d=r.useState(),m=Object(c.a)(d,2),y=m[0],p=m[1],v=r.useState(),g=Object(c.a)(v,2),h=g[0],b=g[1],E=r.useState(0),S=Object(c.a)(E,2),_=S[0],F=S[1],B=r.useMemo((function(){function e(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return void 0===t?void 0:void 0===n?k.a.fromYMD({year:t,month:0,day:1}).addYears(e):void 0===o?k.a.fromYMD({year:t,month:n,day:1}).addMonths(e):k.a.fromYMD({year:t,month:n,day:o}).addDays(e)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);if(e)return l.pathExpensesByDay(e.year,n&&e.month,o&&e.day)}return{dateTitle:function(e,t,n){if(void 0===n){if(void 0===t)return void 0===e?"All":e.toString();if(void 0===e)throw new Error("Year is required");return Object(P.d)(e,t)}if(void 0===e||void 0===t)throw new Error("Year and month are required");return k.a.fromYMD({year:e,month:t,day:n}).shortString}(t,n,o),prevDate:e(-1),nextDate:e(1),numberOfDays:void 0===n?365:void 0===o?30:1}}),[t,n,o,l]),A=B.dateTitle,G=B.prevDate,q=B.nextDate,N=B.numberOfDays;return r.useEffect((function(){if(i.expenseGroups){var e=i.getExpensesByDay(t,n,o);if(e){var r=new Map,a=!0,u=!1,s=void 0;try{for(var l,f=e[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var d=l.value,m=Object(c.a)(d,2),y=m[0],v=m[1],g=k.a.fromTimeMs(y).shortString,h=r.get(g);h||(h=new Map,r.set(g,h));var E=!0,O=!1,j=void 0;try{for(var w,x=v[Symbol.iterator]();!(E=(w=x.next()).done);E=!0){var D=w.value,S=Object(c.a)(D,2),M=S[0],T=S[1];h.set(M,T)}}catch(_){O=!0,j=_}finally{try{E||null==x.return||x.return()}finally{if(O)throw j}}}}catch(_){u=!0,s=_}finally{try{a||null==f.return||f.return()}finally{if(u)throw s}}p(r),F(t?i.getTotalExpenses(t,n,o):i.total)}else p(void 0),F(0);b(i.expectedDailyExpensesAverage)}}),[t,n,o,i]),r.useEffect((function(){return s(A)}),[A]),r.createElement(r.Fragment,null,r.createElement(x.a,{padding:1,marginBottom:2},r.createElement(D.a,{title:f("Daily expenses"),spent:_,total:h*N}),r.createElement(M.a,{container:!0,justify:"space-between",direction:"row",style:{marginTop:"1.5em"}},G&&r.createElement(T.a,{to:G,icon:I.a,replace:!0}),r.createElement(T.a,{to:l.path,icon:C.a,replace:!0}),q&&r.createElement(T.a,{to:q,icon:Y.a,replace:!0}))),void 0===y&&r.createElement(j.a,null,f("No expenses")),y&&r.createElement(O,{budget:i,expensesByGroup:y,categories:u}))},G=n(163),q=n(134),N=n(166);function J(e,t){var n=t.get(e);return n?parseInt(n):void 0}n.d(t,"ExpensesView",(function(){return L}));var L=function(e){var t=e.match.params.budgetId,n=new a.a(t).pathAddExpense,c=new URLSearchParams(e.location.search),i=J("year",c),u=J("month",c),s=J("day",c),l=c.get("category"),f=Object(o.a)(t),d=Object(N.a)();return r.createElement(r.Fragment,null,l?r.createElement((function(){return f&&l&&d?r.createElement(S,Object.assign({budget:f,categoryId:l,categories:d},e)):r.createElement(q.a,null)}),null):r.createElement((function(){return f&&d?r.createElement(A,Object.assign({budget:f,year:i,month:u,day:s,categories:d},e)):r.createElement(q.a,null)}),null),r.createElement(G.a,{to:n}))};t.default=L}}]);
//# sourceMappingURL=16.8f00dd84.chunk.js.map